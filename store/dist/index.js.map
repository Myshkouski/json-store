{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/symbols.js","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///./src/applyHooks.js","webpack:///external \"babel-runtime/core-js/symbol\"","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"babel-runtime/helpers/defineProperty\"","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","STORE","_symbol2","default","STATE","PLUGINS","HOOKS","require","Store","keys","_len","arguments","length","args","Array","_key","_this","this","symbols","reduce","maybeAsyncReduce","hooks","key","apply","undefined","f","promiseOrState","index","array","then","state","createStore","options","StoreFactory","applyHooks","extend","_assign2","_defineProperty3","forEach","use","applyPlugin","indexOf","pre","post","hook","_keys2","unshift","push","bind","create","_applyHooks2"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","export const STORE = Symbol('store')\r\nexport const STATE = Symbol('state')\r\nexport const PLUGINS = Symbol('plugins')\r\nexport const HOOKS = Symbol('hooks')\r\n","module.exports = require(\"babel-runtime/core-js/promise\");","import * as symbols from './symbols'\r\n\r\nconst maybeAsyncReduce = f => (promiseOrState, value, index, array) => {\r\n  if (promiseOrState instanceof Promise) {\r\n    return promiseOrState.then(state => f(state, value, index, array))\r\n  } else {\r\n    return f(promiseOrState, value, index, array)\r\n  }\r\n}\r\n\r\nexport default function (Store, keys, ...args) {\r\n  return Store[symbols.HOOKS].reduce(\r\n    maybeAsyncReduce((value, hooks) => keys.reduce(\r\n      maybeAsyncReduce((value, key) => {\r\n        if (typeof hooks[key] == 'function') {\r\n          return hooks[key].apply(this, args)\r\n        } else {\r\n          return value\r\n        }\r\n      }), undefined\r\n    )), undefined\r\n  )\r\n}\r\n","module.exports = require(\"babel-runtime/core-js/symbol\");","module.exports = require(\"babel-runtime/core-js/object/keys\");","module.exports = require(\"babel-runtime/core-js/object/assign\");","module.exports = require(\"babel-runtime/helpers/defineProperty\");","import * as symbols from './symbols'\r\nimport applyHooks from './applyHooks'\r\n\r\nfunction use(applyPlugin) {\r\n  // if plugin has not been used yet\r\n  if (!~this[symbols.PLUGINS].indexOf(applyPlugin)) {\r\n    // apply plugin extends prototype and returns hooks\r\n    const hooks = applyPlugin(this)\r\n    if (hooks) {\r\n      const pre = {},\r\n        post = {}\r\n      for (let key in hooks) {\r\n        const hook = hooks[key]\r\n        if (typeof hook == 'function') {\r\n          post[key] = hook\r\n        } else if (hook.pre) {\r\n          pre[key] = hook.apply\r\n        } else {\r\n          post[key] = hook.apply\r\n        }\r\n      }\r\n\r\n      if(Object.keys(pre).length) {\r\n        this[symbols.HOOKS].unshift(pre)\r\n      }\r\n\r\n      if(Object.keys(post).length) {\r\n        this[symbols.HOOKS].push(post)\r\n      }\r\n    }\r\n\r\n    this[symbols.PLUGINS].push(applyPlugin)\r\n  }\r\n\r\n  return this\r\n}\r\n\r\nfunction createStore() {\r\n  function Store(options) {\r\n    this[symbols.STATE] = {}\r\n\r\n    StoreFactory.applyHooks.call(this, Store, ['init'], options)\r\n  }\r\n\r\n  Store[symbols.PLUGINS] = []\r\n  Store[symbols.HOOKS] = []\r\n\r\n  Store.extend = () => {\r\n    const Store = createStore()\r\n\r\n    Object.assign(Store, {\r\n      [symbols.PLUGINS]: Store[symbols.PLUGINS]\r\n    })\r\n\r\n    Store[symbols.PLUGINS].forEach(Store.use)\r\n  }\r\n\r\n  Store.use = use.bind(Store)\r\n\r\n  return Store\r\n}\r\n\r\nfunction StoreFactory() {}\r\n\r\nStoreFactory.create = () => createStore()\r\nStoreFactory.applyHooks = applyHooks\r\nStoreFactory.symbols = symbols\r\n\r\nexport default StoreFactory\r\n"],"sourceRoot":""}