{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/symbols.js","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///./src/applyHooks.js","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///external \"babel-runtime/core-js/object/define-property\"","webpack:///external \"babel-runtime/helpers/toConsumableArray\"","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","STORE","STATE","PLUGINS","HOOKS","require","Store","keys","_len","arguments","length","args","Array","_key","_this","this","symbols","reduce","maybeAsyncReduce","hooks","key","apply","undefined","f","promiseOrState","index","array","then","state","createStore","options","_defineProperty2","default","StoreFactory","applyHooks","forEach","symbol","extend","use","applyPlugin","indexOf","pre","post","hook","_keys2","unshift","push","bind","create","_applyHooks2"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","export const STORE = '_store' // Symbol('store')\r\nexport const STATE = 'state' // Symbol('state')\r\nexport const PLUGINS = '_plugins' // Symbol('plugins')\r\nexport const HOOKS = '_hooks' // Symbol('hooks')\r\n","module.exports = require(\"babel-runtime/core-js/promise\");","import * as symbols from './symbols'\r\n\r\nconst maybeAsyncReduce = f => (promiseOrState, value, index, array) => {\r\n  if (promiseOrState instanceof Promise) {\r\n    return promiseOrState.then(state => f(state, value, index, array))\r\n  } else {\r\n    return f(promiseOrState, value, index, array)\r\n  }\r\n}\r\n\r\nexport default function (Store, keys, ...args) {\r\n  return Store[symbols.HOOKS].reduce(\r\n    maybeAsyncReduce((value, hooks) => keys.reduce(\r\n      maybeAsyncReduce((value, key) => {\r\n        if (typeof hooks[key] == 'function') {\r\n          return hooks[key].apply(this, args)\r\n        } else {\r\n          return value\r\n        }\r\n      }), undefined\r\n    )), undefined\r\n  )\r\n}\r\n","module.exports = require(\"babel-runtime/core-js/object/keys\");","module.exports = require(\"babel-runtime/core-js/object/define-property\");","module.exports = require(\"babel-runtime/helpers/toConsumableArray\");","import * as symbols from './symbols'\r\nimport applyHooks from './applyHooks'\r\n\r\nfunction use(applyPlugin) {\r\n  // if plugin has not been used yet\r\n  if (!~this[symbols.PLUGINS].indexOf(applyPlugin)) {\r\n    // apply plugin extends prototype and returns hooks\r\n    const hooks = applyPlugin(this)\r\n    if (hooks) {\r\n      const pre = {},\r\n        post = {}\r\n      for (let key in hooks) {\r\n        const hook = hooks[key]\r\n        if (typeof hook == 'function') {\r\n          post[key] = hook\r\n        } else if (hook.pre) {\r\n          pre[key] = hook.apply\r\n        } else {\r\n          post[key] = hook.apply\r\n        }\r\n      }\r\n\r\n      if(Object.keys(pre).length) {\r\n        this[symbols.HOOKS].unshift(pre)\r\n      }\r\n\r\n      if(Object.keys(post).length) {\r\n        this[symbols.HOOKS].push(post)\r\n      }\r\n    }\r\n\r\n    this[symbols.PLUGINS].push(applyPlugin)\r\n  }\r\n\r\n  return this\r\n}\r\n\r\nfunction createStore() {\r\n  function Store(options) {\r\n    Object.defineProperty(Store, symbols.STATE, {\r\n      value: {}\r\n    })\r\n\r\n    StoreFactory.applyHooks.call(this, Store, ['init'], options)\r\n  }\r\n\r\n  [symbols.PLUGINS, symbols.HOOKS].forEach(symbol => Object.defineProperty(Store, symbol, {\r\n    value: []\r\n  }))\r\n\r\n  Store.extend = () => {\r\n    const Store = createStore()\r\n\r\n    Object.defineProperty(Store, symbols.PLUGINS, {\r\n      value: [...Store[symbols.PLUGINS]]\r\n    })\r\n\r\n    Store[symbols.PLUGINS].forEach(Store.use)\r\n  }\r\n\r\n  Store.use = use.bind(Store)\r\n\r\n  return Store\r\n}\r\n\r\nfunction StoreFactory() {}\r\n\r\nStoreFactory.create = () => createStore()\r\n/**\r\n  @deprecated >=1.0.0\r\n*/\r\nStoreFactory.applyHooks = applyHooks\r\nStoreFactory.symbols = symbols\r\n\r\nexport default StoreFactory\r\n"],"sourceRoot":""}